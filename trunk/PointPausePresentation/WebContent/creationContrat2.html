<html xmlns:facelets="http://java.sun.com/jsf/facelets"
	xmlns:jsf="http://java.sun.com/jsf/html"
	xmlns:jsfCore="http://java.sun.com/jsf/core"
	xmlns:richfaces="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:jstl="http://java.sun.com/jstl/core">

<facelets:composition template="masterPage.html">
	<facelets:define name="HeadScriptorCss">
		<link type="text/css" href="css/contrat.css" rel="stylesheet" />
		<script type="text/javascript" src="scripts/redirection.js"></script>
	</facelets:define>

	<facelets:define name="Contenu">
		
		 <jstl:if test="${sessionScope['session']==null}" >
   		   <div id="cacheur" style="margin-top:20px;width:1000px; height: 600px; background-color:gray; margin:auto; opacity:0.8; position:absolute;"></div> 
<div id="simplediv" style="margin:auto;padding:15px;border-radius: 5px;position:relative; -moz-border-radius: 2em; background-color:#FF9900;border:1px solid black;width:200px;height:100px;">
   		Vous devez vous connecter pour cela ! <br />
   		<u>Cliquez pour fermer...</u></div>
   </jstl:if >
   <jsfCore:subview id="creationContrat">
			<jsf:form partialSubmit="true">
				
				<richfaces:simpleTogglePanel
					switchType="ajax" label="unecommande">
					<jsfCore:facet name="header">
						Nouvelle commande ? 
				 </jsfCore:facet>
					<table>
						<tr>
							<th>Quantite</th>
							<th>Formule</th>
							<th>Machine</th>
						</tr>
						<tr>
							<td><richfaces:inputNumberSpinner minValue="1"
								enableManualInput="true" value="#{ChoixContratBean.quantite}"
								step="1"></richfaces:inputNumberSpinner></td>
							<td><richfaces:tabPanel swithType="ajax">
								<richfaces:tab label="Nos formules">

									<richfaces:comboBox selectFirstOnUpdate="true"
										value="#{ChoixContratBean.selectedFormule}">
										<!-- <jsf:selectOneMenu value="#{ChoixContratBean.selectedFormule}"> -->


					<jsfCore:selectItems value="#{ChoixContratBean.formules}" />
					<a4j:support event="onselect"
						action="#{ChoixContratBean.getDescriptionFormuleAjax}"
						reRender="reponseFormule, check" />


					<!-- </jsf:selectOneMenu>-->
				</richfaces:comboBox>


			</richfaces:tab>

			<richfaces:tab label="A la carte">
			composer sa formule
</richfaces:tab>

		</richfaces:tabPanel></td>


		<td><richfaces:comboBox selectFirstOnUpdate="true"
			value="#{ChoixContratBean.selectedMachine}">
			<!-- <jsf:selectOneMenu value="#{ChoixContratBean.selectedFormule}"> -->


			<jsfCore:selectItems value="#{ChoixContratBean.machines}" />
			<a4j:support event="onselect"
				action="#{ChoixContratBean.getDescriptionMachineAjax}"
				reRender="reponseMachine, check" />


			<!-- </jsf:selectOneMenu>-->
							</richfaces:comboBox></td>

							<td><richfaces:panel>
								<jsf:outputText id="reponseFormule"
									value="#{ChoixContratBean.descriptionFormule}" />
									</richfaces:panel>
									<richfaces:panel>
						<jsf:outputText id="reponseMachine"
									value="#{ChoixContratBean.descriptionMachine}" />
							</richfaces:panel>
							<a4j:outputPanel id="check">
							<richfaces:panel rendered="#{ChoixContratBean.essaiValid}">
							<jsf:outputText value="#{ChoixContratBean.check}" /></richfaces:panel>
							</a4j:outputPanel>
							</td>
							
						</tr>

					</table>
					<a4j:commandButton  action="#{ChoixContratBean.Submit1}" reRender="suite, check" value="valider"  > </a4j:commandButton>
						
				</richfaces:simpleTogglePanel> 
			
		

		
		
		<a4j:outputPanel  id="suite"> 
			<richfaces:simpleTogglePanel switchType="ajax" rendered="#{ChoixContratBean.suite}">
						
						<jsf:inputText value="#{ChoixContratBean.test}"></jsf:inputText>
							<jsf:commandButton action="#{ChoixContratBean.Inserer}" value="valider"></jsf:commandButton>
					</richfaces:simpleTogglePanel>
			</a4j:outputPanel>
			</jsf:form>
	</jsfCore:subview>
	</facelets:define>

</facelets:composition>
</html>