<html xmlns:facelets="http://java.sun.com/jsf/facelets"
	xmlns:jsf="http://java.sun.com/jsf/html"
	xmlns:jsfCore="http://java.sun.com/jsf/core"
	xmlns:richfaces="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:jstl="http://java.sun.com/jstl/core">

<facelets:composition template="masterPage.html">
	<facelets:define name="HeadScriptorCss">
		<link type="text/css" href="css/contrat.css" rel="stylesheet" />
		<script type="text/javascript" src="scripts/toggle.js"></script>
	</facelets:define>

	<facelets:define name="Contenu">
		<jsfCore:view id="creationContrat">
			<jsf:form>
<div id="general">
				<richfaces:simpleTogglePanel switchType="ajax" label="unecommande">

					<jsfCore:facet name="header">
						Nouvelle commande ? 
				 </jsfCore:facet>
					<table>
						<tr>
							<th>Quantite</th>
							<th>Formule</th>
							<th>Machine</th>
						</tr>
						<tr>
							<td><richfaces:inputNumberSpinner enableManualInput="true"
								value="#{ChoixContratBean.quantite}" step="1"></richfaces:inputNumberSpinner></td>
							<td><richfaces:tabPanel swithType="ajax">
								<richfaces:tab label="Nos formules">

									<richfaces:comboBox selectFirstOnUpdate="true"
										value="#{ChoixContratBean.selectedFormule}">
										<!-- <jsf:selectOneMenu value="#{ChoixContratBean.selectedFormule}"> -->


										<jsfCore:selectItems value="#{ChoixContratBean.formules}" />
										<a4j:support event="onselect"
											action="#{ChoixContratBean.getDescriptionFormule}"
											reRender="reponse" />


										<!-- </jsf:selectOneMenu>-->
									</richfaces:comboBox>
									

								</richfaces:tab>

								<richfaces:tab label="A la carte">
								composer sa formule
					</richfaces:tab>

							</richfaces:tabPanel></td>


							<td><richfaces:comboBox selectFirstOnUpdate="true"
								value="#{ChoixContratBean.selectedMachine}">
								<!-- <jsf:selectOneMenu value="#{ChoixContratBean.selectedFormule}"> -->


								<jsfCore:selectItems value="#{ChoixContratBean.machines}" />
								<a4j:support event="onselect"
									action="#{ChoixContratBean.getDescriptionMachine}"
									reRender="reponse" />


								<!-- </jsf:selectOneMenu>-->
							</richfaces:comboBox></td>

							<td><richfaces:panel>
								<jsf:outputText id="reponse"
									value="#{ChoixContratBean.description}" />

							</richfaces:panel></td>



						</tr>

					</table>
				</richfaces:simpleTogglePanel>
				<jsf:commandButton action="#{ChoixContratBean.Submit1}"
						value="valider"></jsf:commandButton>
						
				<jstl:if test="${sessionScope['contratok']!=null}">			
					<richfaces:simpleTogglePanel switchType="ajax" label="Modalites de contrat">
						<table border="1" cellpadding="4" cellspacing="0" >
						<tr>
							<th>"#{ChoixContratBean.selectedFormule}"</th>
							<th>Modalit&#233;s</th>
						</tr>
						<tr>
							<td><richfaces:inputNumberSpinner enableManualInput="true"
								value="#{ChoixContratBean.quantite}" step="1"></richfaces:inputNumberSpinner>
								</td>
							<td>
							Fr&#233;quence d'approvisionnement <richfaces:comboBox></richfaces:comboBox>
							Localisation <richfaces:comboBox></richfaces:comboBox>
							Dur&#233;e <richfaces:comboBox></richfaces:comboBox>
							</td>
							
							</tr>
							</table>
					</richfaces:simpleTogglePanel>
					</jstl:if>
					<jsf:commandButton action="#{ChoixContratBean.kill}" value="kill"></jsf:commandButton>
			</div>
			</jsf:form>
		</jsfCore:view>
	</facelets:define>

</facelets:composition>
</html>