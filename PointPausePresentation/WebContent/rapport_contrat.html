<html xmlns:facelets="http://java.sun.com/jsf/facelets"
	xmlns:jsf="http://java.sun.com/jsf/html"
	xmlns:jsfCore="http://java.sun.com/jsf/core"
	xmlns:richfaces="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:jstl="http://java.sun.com/jstl/core">

<facelets:composition template="masterPage.html">
	<facelets:define name="HeadScriptorCss">
		<link type="text/css" href="css/contrat.css" rel="stylesheet" />
		<link type="text/css" href="css/rapportcontrat.css" rel="stylesheet" />
		<script type="text/javascript" src="scripts/redirection.js"></script>
	</facelets:define>

	<facelets:define name="Contenu">

		<jstl:if test="${sessionScope['session']==null}">
			<div id="cacheur"
				style="margin-top: 20px; width: 1000px; height: 600px; background-color: gray; margin: auto; opacity: 0.8; position: absolute;"></div>
			<div id="simplediv"
				style="margin: auto; padding: 15px; border-radius: 5px; position: relative; -moz-border-radius: 2em; background-color: #FF9900; border: 1px solid black; width: 200px; height: 100px;">
			Vous devez vous connecter pour cela ! <br />
			<u>Cliquez pour fermer...</u></div>
		</jstl:if>


		<jsfCore:view id="rapportincident">
			<div class="mainrapportcontratdiv">
				<a4j:repeat value='#{rapportcontratMB.listeContrats}' var="contrat">



				<div class="rapportcontratdiv" >
				
				<h3>Contrat #<jsf:outputText value="#{contrat.numero}" /></h3>

			
				
				<richfaces:dataTable styleClass="statutcontrattable">

					<jsfCore:facet name="header">
						<jsf:outputText value="Détails" />
					</jsfCore:facet>

					<richfaces:column>
						<jsfCore:facet name="header">Date de debut :</jsfCore:facet>
						<jsf:outputText value="#{contrat.dateDebut}">
							<jsfCore:convertDateTime type="date" dateStyle="short" />
						</jsf:outputText>
					</richfaces:column>
					
					<jsfCore:facet name="header">Date de fin :</jsfCore:facet>
						<jsf:outputText value="#{contrat.dateFin}">
							<jsfCore:convertDateTime type="date" dateStyle="short" />
						</jsf:outputText>
					</richfaces:column>

					<richfaces:column>
						<jsfCore:facet name="header">Freq. Appro :</jsfCore:facet>
						<jsf:outputText value="#{contrat.freqApprovisionnement}" />
					</richfaces:column>

					<richfaces:column>
						<jsfCore:facet name="header">Garantie : </jsfCore:facet>
						<jsf:outputText value="#{contrat.garantie}" />
					</richfaces:column>

				</richfaces:dataTable>
				
				<br/>
				<br/>

				<richfaces:dataTable styleClass="statutcontrattable"
					value="#{contrat.listeBouquets}" var="bouquet">

					<jsfCore:facet name="header">
						<jsf:outputText value="Bouquets : " />
					</jsfCore:facet>

					<richfaces:column>
						<jsfCore:facet name="header">Formule</jsfCore:facet>
						<jsf:outputText value="#{bouquet.strFormule}" />
					</richfaces:column>

					<richfaces:column>
						<jsfCore:facet name="header">Modèle de machine : </jsfCore:facet>
						<jsf:outputText value="#{bouquet.strModeleAutomate}" />
					</richfaces:column>

					<richfaces:column>
						<jsfCore:facet name="header">Quantité :  </jsfCore:facet>
						<jsf:outputText value="#{bouquet.quantite}">
						</jsf:outputText>
					</richfaces:column>

				</richfaces:dataTable>


				<div class="clearer"></div>
				</div>


			</a4j:repeat></div>

		</jsfCore:view>
	</facelets:define>

</facelets:composition>
</html>